<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        font-family: Helvetica;
      }

      .containerparent {
        margin: 2em;
        display: flex;
        justify-content: space-between;
        flex-direction: column;
      }

      .left, .right {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
     @media only screen and (min-width: 860px)
     {
       .containerparent {
         flex-direction: row;
       }
       .left {
         width: 30%;
       }
      
       .right {
         width: 60%;
       }
     }
      
      h2 {
        font-size: 2rem;
        color: #333;
        margin-top: 20px;
        margin-bottom: 1rem;
      }
      
      form {
       margin-top: 20px;
      }
      
      label {
        font-size: 1.2rem;
        color: #333;
      }
      
      input[type="number"] {
        padding: .5rem;
        border-radius: .5rem;
        border: none;
        box-shadow: rgba(0,0,0,.1) 0px 4px 12px;
        margin-bottom: .5rem;
      }
      
      button[type="button"] {
        background-color: #333;
        color: #fff;
        padding: .5rem .8rem;
        border-radius: .5rem;
        border: none;
      }
      p {
        font-size: 1.2rem;
        color: #333;
        margin-bottom: .5rem;
      }
      
      #totalcost {
        font-size: 1.5rem;
        font-weight: bold;
      }
      
      #profit {
        font-size: 1.5rem;
        font-weight: bold;
        color: green;
      }
      .error {
        display: block;
      }
    </style>
  </head>
<body>

  <h1>Calculator</h1>
  <div class="containerparent">
    <div class="left">
      <h2>Help and information</h2>
      <p>If you have printify prices synced with Etsy these details should give an overview of the Etsy or final cost and profit. <br> 
      All the data needed can be found in your product details and choose a product variant for which you want to calculate the costs and profit. </p>
    </div>
    <div class="right">
      <form>
        <label for="prod_cost">Printify production cost</label><br> <!-- 9.01 eur -->
        <input type="number" id="prod_cost" name="prod_cost" oninput="checkInputs()" min="0"><br>
        <label for="ship_cost">Printify shipping cost</label><br> <!-- 5.10 eur -->
        <input type="number" id="ship_cost" name="ship_cost" oninput="checkInputs()" min="0"><br>
        <label for="retailprice">Printify retail price (EXCLUDING SHIPPING)</label><br> <!--  -->
        <input type="number" id="retailprice" name="retailprice" oninput="checkInputs()" min="0" onkeydown="if (event.keyCode === 13) { calculate(); return false; }"><br>
        <!--<label for="num3">Printify retail price</label><br>
        <input type="number" id="num3" name="num3"><br><br>-->
        <!--<label for="nSales">Amount of sales (expected) over listing months</label><br>
        <input type="number" id="nSales" name="nSales"><br><br>-->
        <button type="button" onclick="checkInputs()">Calculate</button>
        <label id="error" class="error"></label>
      </form>
      
      <p id="printifyresult"></p> <!-- 17.07 eur -->
      <p id="etsyresult"></p> <!-- 3.13 eur -->
      <p id="totalcost"></p> <!-- 20.22 eur -->
      <!--<p id="noprofit"></p>--> <!-- 20.02 eur -->
      
      <p id="profit"></p> <!-- 1.43 eur -->
    </div>
  </div>

  
  <script>
  function calculate() {
    var printify_production_costs = parseFloat(document.getElementById("prod_cost").value);
    var printify_shipping = parseFloat(document.getElementById("ship_cost").value);
    var printify_VAT = (printify_production_costs+printify_shipping)*0.21;
    var printifyresult = printify_shipping + printify_production_costs + printify_VAT;
    
    var listingcost = 0.2; // one time
    var retailprice_excl_shipping = parseFloat(document.getElementById("retailprice").value);
    var retailprice_incl_shipping = retailprice_excl_shipping+printify_shipping;
    
    var processcost = 0.04*retailprice_incl_shipping+0.35;
    var transcost = 0.065*retailprice_incl_shipping;
    var EtsyVAT = 0.01*retailprice_incl_shipping+0.01*printify_shipping+processcost*0.21;
    var etsyresult = processcost+transcost+EtsyVAT; 
    var totalcost = printifyresult + etsyresult;
  
    var noprofit = (printifyresult + 0.35 * 1.21 - 0.01 * printify_shipping) / (1 + 0.065 + 0.01 + 0.04 * 1.21);
    var profit = retailprice_incl_shipping - totalcost; // 1.43 eur
    
    document.getElementById("printifyresult").innerHTML = "Printify: Total  costs " + printifyresult.toFixed(2);
    document.getElementById("etsyresult").innerHTML = "Etsy: Total cost " + etsyresult.toFixed(2);
    document.getElementById("totalcost").innerHTML = "Total cost " + totalcost.toFixed(2);
    //document.getElementById("noprofit").innerHTML = "The noprofit Etsy price is: " + noprofit.toFixed(2);
  
    document.getElementById("profit").innerHTML = "Total profit " + profit.toFixed(2);
  
  }
  
  function checkInputs() {
    var inputs = document.querySelectorAll('input[type=number]');
    var filledIn = true;
    
    inputs.forEach(function(input) {
      if (input.value === '') {
        filledIn = false;
      }
    });
    
    if (filledIn) {
      document.getElementById('error').textContent = '';
      calculate();
    } else 
    {
      document.getElementById('error').textContent = 'Please enter a valid number for all fields';
    }
  }
  </script>

</body>
</html>
